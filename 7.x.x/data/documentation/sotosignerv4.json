{"sections":[],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/sotosignerv4"]}],"hierarchy":{"paths":[[]]},"identifier":{"url":"doc:\/\/codes.soto.soto-core\/documentation\/SotoSignerV4","interfaceLanguage":"swift"},"schemaVersion":{"patch":0,"minor":3,"major":0},"abstract":[{"type":"text","text":"Sign HTTP requests before sending them to AWS either by generating a signed URL or a set of signed headers."}],"kind":"symbol","metadata":{"externalID":"SotoSignerV4","modules":[{"name":"SotoSignerV4"}],"symbolKind":"module","roleHeading":"Framework","role":"collection","title":"SotoSignerV4"},"seeAlsoSections":[{"anchor":"Related-Documentation","identifiers":["doc:\/\/codes.soto.soto-core\/documentation\/SotoCore"],"title":"Related Documentation"}],"primaryContentSections":[{"content":[{"type":"heading","level":2,"text":"Overview","anchor":"Overview"},{"type":"heading","level":3,"text":"Initialisation","anchor":"Initialisation"},{"type":"paragraph","inlineContent":[{"type":"text","text":"To create a "},{"code":"AWSSigner","type":"codeVoice"},{"type":"text","text":" you need a set of credentials, a signing name and a AWS region."}]},{"type":"codeListing","code":["let credentials: Credential = StaticCredential(","    accessKeyId: \"_MYACCESSKEY_\", ","    secretAccessKey: \"_MYSECRETACCESSKEY_\"",")","let signer = AWSSigner(credentials: credentials, name: \"s3\", region: \"eu-west-1\")"],"syntax":"swift"},{"type":"heading","level":3,"text":"Signed URLs","anchor":"Signed-URLs"},{"type":"paragraph","inlineContent":[{"text":"A signed URL includes the signature as query parameter ","type":"text"},{"code":"X-Amz-Signature","type":"codeVoice"},{"text":". The method ","type":"text"},{"code":"signURL","type":"codeVoice"},{"text":" will create a signed URL.","type":"text"}]},{"type":"codeListing","code":["let url = URL(string: \"https:\/\/my-bucket.s3.eu-west-1.awsamazon.com\/file\")!","let signedURL = signer.signURL(url: url, method: .GET, expires: .minutes(60))"],"syntax":"swift"},{"type":"heading","level":3,"text":"Signed Headers","anchor":"Signed-Headers"},{"type":"paragraph","inlineContent":[{"text":"Instead of returning a signed URL you can add an additional ","type":"text"},{"code":"authorization","type":"codeVoice"},{"text":" header which includes the signature. Use the method ","type":"text"},{"code":"signHeaders","type":"codeVoice"},{"text":" to create a set of signed headers which you can use with the rest of your request.","type":"text"}]},{"type":"codeListing","code":["let signedHeaders = signer.signHeaders(url: url, method: .GET, headers: headers, body: .byteBuffer(body))"],"syntax":"swift"},{"type":"heading","level":3,"text":"Processing requests","anchor":"Processing-requests"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Some request URLs need to be processed before signing. The signer expects query parameters to be alphabetically sorted and that paths have been percent encoded. You can use "},{"type":"codeVoice","code":"processURL"},{"type":"text","text":" to do this work for you."}]},{"type":"codeListing","code":["let url = URL(string: \"https:\/\/my-bucket.s3.eu-west-1.awsamazon.com\/file\")!","let processedURL = signer.processURL(url)!","let signedURL = signer.signURL(url: processedURL, method: .GET, expires: .minutes(60))"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can find out more about the AWS signing process "},{"type":"reference","identifier":"https:\/\/docs.aws.amazon.com\/general\/latest\/gr\/sigv4_signing.html","isActive":true},{"type":"text","text":"."}]}],"kind":"content"}],"topicSections":[{"anchor":"Signer","identifiers":["doc:\/\/codes.soto.soto-core\/documentation\/SotoSignerV4\/AWSSigner"],"title":"Signer"},{"anchor":"Credentials","identifiers":["doc:\/\/codes.soto.soto-core\/documentation\/SotoSignerV4\/Credential","doc:\/\/codes.soto.soto-core\/documentation\/SotoSignerV4\/StaticCredential"],"title":"Credentials"},{"generated":true,"identifiers":["doc:\/\/codes.soto.soto-core\/documentation\/SotoSignerV4\/ByteBuffer","doc:\/\/codes.soto.soto-core\/documentation\/SotoSignerV4\/ByteBufferAllocator","doc:\/\/codes.soto.soto-core\/documentation\/SotoSignerV4\/HTTPHeaders","doc:\/\/codes.soto.soto-core\/documentation\/SotoSignerV4\/TimeAmount"],"anchor":"Structures","title":"Structures"},{"generated":true,"identifiers":["doc:\/\/codes.soto.soto-core\/documentation\/SotoSignerV4\/HTTPMethod"],"anchor":"Enumerations","title":"Enumerations"}],"references":{"doc://codes.soto.soto-core/documentation/SotoSignerV4/AWSSigner":{"type":"topic","identifier":"doc:\/\/codes.soto.soto-core\/documentation\/SotoSignerV4\/AWSSigner","kind":"symbol","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"AWSSigner"}],"navigatorTitle":[{"kind":"identifier","text":"AWSSigner"}],"url":"\/documentation\/sotosignerv4\/awssigner","title":"AWSSigner","abstract":[{"text":"Amazon Web Services V4 Signer","type":"text"}],"role":"symbol"},"doc://codes.soto.soto-core/documentation/SotoSignerV4/HTTPMethod":{"identifier":"doc:\/\/codes.soto.soto-core\/documentation\/SotoSignerV4\/HTTPMethod","title":"HTTPMethod","fragments":[{"text":"enum","kind":"keyword"},{"text":" ","kind":"text"},{"text":"HTTPMethod","kind":"identifier"}],"navigatorTitle":[{"text":"HTTPMethod","kind":"identifier"}],"abstract":[],"kind":"symbol","url":"\/documentation\/sotosignerv4\/httpmethod","type":"topic","role":"symbol"},"doc://codes.soto.soto-core/documentation/SotoSignerV4/Credential":{"type":"topic","identifier":"doc:\/\/codes.soto.soto-core\/documentation\/SotoSignerV4\/Credential","kind":"symbol","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Credential","kind":"identifier"}],"navigatorTitle":[{"text":"Credential","kind":"identifier"}],"url":"\/documentation\/sotosignerv4\/credential","title":"Credential","abstract":[{"text":"Protocol for providing credential details for accessing AWS services","type":"text"}],"role":"symbol"},"doc://codes.soto.soto-core/documentation/SotoSignerV4/TimeAmount":{"type":"topic","identifier":"doc:\/\/codes.soto.soto-core\/documentation\/SotoSignerV4\/TimeAmount","kind":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"TimeAmount","kind":"identifier"}],"navigatorTitle":[{"text":"TimeAmount","kind":"identifier"}],"url":"\/documentation\/sotosignerv4\/timeamount","title":"TimeAmount","abstract":[{"text":"Represents a time ","type":"text"},{"inlineContent":[{"text":"interval","type":"text"}],"type":"emphasis"},{"text":".","type":"text"}],"role":"symbol"},"doc://codes.soto.soto-core/documentation/SotoSignerV4/HTTPHeaders":{"identifier":"doc:\/\/codes.soto.soto-core\/documentation\/SotoSignerV4\/HTTPHeaders","title":"HTTPHeaders","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"HTTPHeaders","kind":"identifier"}],"navigatorTitle":[{"text":"HTTPHeaders","kind":"identifier"}],"abstract":[{"text":"A representation of a block of HTTP header fields.","type":"text"}],"kind":"symbol","url":"\/documentation\/sotosignerv4\/httpheaders","type":"topic","role":"symbol"},"doc://codes.soto.soto-core/documentation/SotoSignerV4/ByteBufferAllocator":{"url":"\/documentation\/sotosignerv4\/bytebufferallocator","abstract":[{"text":"The preferred allocator for ","type":"text"},{"code":"ByteBuffer","type":"codeVoice"},{"text":" values. The allocation strategy is opaque but is currently libcâ€™s","type":"text"},{"text":" ","type":"text"},{"code":"malloc","type":"codeVoice"},{"text":", ","type":"text"},{"type":"codeVoice","code":"realloc"},{"type":"text","text":" and "},{"type":"codeVoice","code":"free"},{"type":"text","text":"."}],"role":"symbol","kind":"symbol","title":"ByteBufferAllocator","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ByteBufferAllocator"}],"identifier":"doc:\/\/codes.soto.soto-core\/documentation\/SotoSignerV4\/ByteBufferAllocator","navigatorTitle":[{"kind":"identifier","text":"ByteBufferAllocator"}],"type":"topic"},"doc://codes.soto.soto-core/documentation/SotoSignerV4/StaticCredential":{"type":"topic","identifier":"doc:\/\/codes.soto.soto-core\/documentation\/SotoSignerV4\/StaticCredential","url":"\/documentation\/sotosignerv4\/staticcredential","kind":"symbol","navigatorTitle":[{"text":"StaticCredential","kind":"identifier"}],"abstract":[{"type":"text","text":"basic version of Credential where you supply the credentials"}],"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"StaticCredential","kind":"identifier"}],"title":"StaticCredential","role":"symbol"},"doc://codes.soto.soto-core/documentation/SotoSignerV4":{"url":"\/documentation\/sotosignerv4","identifier":"doc:\/\/codes.soto.soto-core\/documentation\/SotoSignerV4","type":"topic","kind":"symbol","abstract":[{"text":"Sign HTTP requests before sending them to AWS either by generating a signed URL or a set of signed headers.","type":"text"}],"title":"SotoSignerV4","role":"collection"},"doc://codes.soto.soto-core/documentation/SotoCore":{"identifier":"doc:\/\/codes.soto.soto-core\/documentation\/SotoCore","title":"SotoCore","abstract":[{"text":"The core framework for Soto, a Swift SDK for AWS","type":"text"}],"kind":"symbol","url":"\/documentation\/sotocore","type":"topic","role":"collection"},"https://docs.aws.amazon.com/general/latest/gr/sigv4_signing.html":{"identifier":"https:\/\/docs.aws.amazon.com\/general\/latest\/gr\/sigv4_signing.html","titleInlineContent":[{"text":"here","type":"text"}],"url":"https:\/\/docs.aws.amazon.com\/general\/latest\/gr\/sigv4_signing.html","type":"link","title":"here"},"doc://codes.soto.soto-core/documentation/SotoSignerV4/ByteBuffer":{"type":"topic","identifier":"doc:\/\/codes.soto.soto-core\/documentation\/SotoSignerV4\/ByteBuffer","url":"\/documentation\/sotosignerv4\/bytebuffer","kind":"symbol","navigatorTitle":[{"text":"ByteBuffer","kind":"identifier"}],"abstract":[{"code":"ByteBuffer","type":"codeVoice"},{"type":"text","text":" stores contiguously allocated raw bytes. It is a random and sequential accessible sequence of zero or"},{"type":"text","text":" "},{"type":"text","text":"more bytes (octets)."}],"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ByteBuffer","kind":"identifier"}],"title":"ByteBuffer","role":"symbol"}}}